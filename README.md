# ğŸ› ï¸ Laravel Simple Module : Domain-Driven Code Generator

This package provides a set of powerful and flexible Artisan commands to streamline your development. It's especially suited for **DDD (Domain-Driven Design)** or modular architectures in laravel. This simple and customizable package enables you to rapidly scaffold modules with repository-service pattern in a Laravel application using a clean structure that includes Models, Traits, Controllers, Services, Repositories, Events, Listeners, and more â€” all following your custom directory conventions.

## ğŸ§° Features

Create modular components with a single command
Automatically generates layered architecture (API, Backend, Frontend)
Supports Events, Listeners, Repositories, Services, Requests, Policies, Views
Minimal configuration needed
Fully customizable module path and namespace

## ğŸ“¦ Requirements

- Minimum PHP ^8.1
Laravel ^9.0 or ^10.0

## ğŸš€ Installation

Install via Composer:

You can install the package via composer for latest version
```bash
composer require mzaman/laravel-simple-module
```

Then publish the config file (âš ï¸ must be published for proper usage):

```bash
php artisan vendor:publish --provider="LaravelSimpleModule\LaravelSimpleModuleServiceProvider" --tag="simple-module-config"
```
This will create a config/simple-module.php file, where you can set default module paths, namespaces, and component settings.

## âš™ï¸ Configuration (config/simple-module.php)

```php
return [
    "request_directory" => "app/Requests",
    "request_namespace" => "App\Requests",

    "module_directory" => "app/Modules",
    "module_namespace" => "App\Modules",

    "interface_directory" => "app/Interfaces",
    "interface_namespace" => "App\Interfaces",

    "abstract_directory" => "app/Abstracts",
    "abstract_namespace" => "App\Abstracts",

    "model_directory" => "app/Models",
    "model_namespace" => "App\Models",

    "policy_directory" => "app/Policies",
    "policy_namespace" => "App\Policies",

    "repository_directory" => "app/Repositories",
    "repository_namespace" => "App\Repositories",

    "service_directory" => "app/Services",
    "service_namespace" => "App\Services",
];
```

## ğŸ§ª Example Usage

### ğŸ¯ Generate a Complete Module

```bash
php artisan make:module Blog
```

You will be prompted to:
- Select layers (API, Backend, Frontend)
- Enter model names (e.g., `Post, Comment`)
- Choose which components to generate (Models, Events, Listeners, Controllers, Requests, etc.)

The module will be generated at:

```
app/Modules/Blog/
â”œâ”€â”€ Events/
â”œâ”€â”€ Http/
â”‚   â””â”€â”€ Controllers/
â”œâ”€â”€ Listeners/
â”œâ”€â”€ Models/
â”œâ”€â”€ Policies/
â”œâ”€â”€ Repositories/
â”œâ”€â”€ Requests/
â”œâ”€â”€ Services/
â”œâ”€â”€ Traits/
â””â”€â”€ Views/
```

### âš™ï¸ Optional Flags

You can customize the generation path or force overwrite existing files:

```bash
php artisan make:module Blog --path=custom/modules --force
```

## ğŸ§± What It Generates

Given a model `Post` and choosing API layer, you will get:

- `Models/Post.php`
- `Repositories/PostApiRepository.php`
- `Services/PostApiService.php`
- `Http/Controllers/Api/PostApiController.php`
- `Requests/StorePostRequest.php`, `UpdatePostRequest.php`
- `Events/PostCreated.php`, `PostUpdated.php`, etc.
- `Listeners/PostEventListener.php`
- `Migrations`, `Seeders`, `Factories` if selected

## ğŸ”„ Auto-Binding

The package automatically binds:

```php
PostApiRepositoryInterface => PostApiRepository
PostApiServiceInterface    => PostApiService
```

So you can type-hint interfaces in your controllers and services.

## ğŸ“˜ Example Controller Usage

```
<?php

namespace App\Modules\Blog\Services\Api;

use Illuminate\Database\Eloquent\ModelNotFoundException;
use Illuminate\Database\QueryException;
use App\Modules\Blog\Repositories\Api\PostApiRepository;
use \Exception;

/**
 * Class PostApiService.
 * 
 * @extends \App\Services\BaseApiService
 * @implements PostApiServiceInterface
 */
class PostApiService extends \App\Services\BaseApiService implements PostApiServiceInterface { 

    /**
     * Set message api for CRUD
     * @param string $title
     * @param string $create_message
     * @param string $update_message
     * @param string $delete_message
     */
     protected $title = "";
     protected $create_message = "";
     protected $update_message = "";
     protected $delete_message = "";

     /**
     * Don't change $this->repository variable name
     * because used in extends service class
     */
     protected $repository;

    public function __construct(PostApiRepository $repository)
    {
      $this->repository = $repository;
    }

    // Additional methods specific to PostApiService
    // New methods for the Api Service
}
```

## ğŸ“ File Structure

Below is the standard directory structure generated by the command tools:

```
app
 â””â”€â”€ Domains
     â””â”€â”€ V1
         â””â”€â”€ ${ModuleName}
             â”œâ”€â”€ Events
             â”‚   â””â”€â”€ ${ModuleName}
             â”‚       â”œâ”€â”€ ${ModelName}Created.php
             â”‚       â”œâ”€â”€ ${ModelName}Deleted.php
             â”‚       â””â”€â”€ ${ModelName}Updated.php
             â”œâ”€â”€ Http
             â”‚   â”œâ”€â”€ Controllers
             â”‚   â”‚   â”œâ”€â”€ Api
             â”‚   â”‚   â”‚   â””â”€â”€ ${ModuleName}/${ModelName}Controller.php
             â”‚   â”‚   â”œâ”€â”€ Backend
             â”‚   â”‚   â”‚   â””â”€â”€ ${ModuleName}/${ModelName}Controller.php
             â”‚   â”‚   â””â”€â”€ Frontend
             â”‚   â”‚       â””â”€â”€ ${ModuleName}/${ModelName}Controller.php
             â”‚   â”œâ”€â”€ Middleware
             â”‚   â””â”€â”€ Requests
             â”‚       â”œâ”€â”€ Backend/${ModuleName}
             â”‚       â”‚   â”œâ”€â”€ Delete${ModelName}Request.php
             â”‚       â”‚   â”œâ”€â”€ Edit${ModelName}Request.php
             â”‚       â”‚   â”œâ”€â”€ Store${ModelName}Request.php
             â”‚       â”‚   â””â”€â”€ Update${ModelName}Request.php
             â”‚       â””â”€â”€ Frontend/${ModuleName}
             â”‚           â””â”€â”€ Get${ModelName}Request.php
             â”œâ”€â”€ Listeners
             â”‚   â””â”€â”€ ${ModelName}EventListener.php
             â”œâ”€â”€ Models
             â”‚   â”œâ”€â”€ Traits
             â”‚   â”‚   â”œâ”€â”€ Attribute/${ModelName}Attribute.php
             â”‚   â”‚   â”œâ”€â”€ Method/${ModelName}Method.php
             â”‚   â”‚   â”œâ”€â”€ Relationship/${ModelName}Relationship.php
             â”‚   â”‚   â””â”€â”€ Scope/${ModelName}Scope.php
             â”‚   â””â”€â”€ ${ModelName}.php
             â”œâ”€â”€ Notifications
             â”‚   â””â”€â”€ Frontend
             â”‚       â””â”€â”€ Get${ModuleName}Notification.php
             â”œâ”€â”€ Observers
             â”‚   â””â”€â”€ ${ModelName}Observer.php
             â”œâ”€â”€ Rules
             â”‚   â””â”€â”€ ${ModelName}Rule.php
             â”œâ”€â”€ Repository
             â”‚   â””â”€â”€ ${ModelName}Repository.php
             â””â”€â”€ Services
                 â””â”€â”€ ${ModelName}Service.php

Modules
 â””â”€â”€ BaseModule.php
```

## ğŸ“š Here is an example of the directory structure generated by the Laravel Simple Module package:

```
./
app/ - Laravel application code
â”œâ”€â”€ Domains
â”‚Â Â  â””â”€â”€ V1
â”‚Â Â      â””â”€â”€ News
â”‚Â Â          â”œâ”€â”€ Events
â”‚Â Â          â”‚Â Â  â””â”€â”€ Post
â”‚Â Â          â”‚Â Â      â”œâ”€â”€ PostCreated.php
â”‚Â Â          â”‚Â Â      â”œâ”€â”€ PostDeleted.php
â”‚Â Â          â”‚Â Â      â””â”€â”€ PostUpdated.php
â”‚Â Â          â”œâ”€â”€ Http
â”‚Â Â          â”‚Â Â  â”œâ”€â”€ Controllers
â”‚Â Â          â”‚Â Â  â”‚Â Â  â””â”€â”€ Api
â”‚Â Â          â”‚Â Â  â”‚Â Â      â””â”€â”€ PostApiController.php
â”‚Â Â          â”‚Â Â  â””â”€â”€ Requests
â”‚Â Â          â”‚Â Â      â””â”€â”€ Api
â”‚Â Â          â”‚Â Â          â””â”€â”€ Post
â”‚Â Â          â”‚Â Â              â”œâ”€â”€ DeletePostRequest.php
â”‚Â Â          â”‚Â Â              â”œâ”€â”€ EditPostRequest.php
â”‚Â Â          â”‚Â Â              â”œâ”€â”€ StorePostRequest.php
â”‚Â Â          â”‚Â Â              â””â”€â”€ UpdatePostRequest.php
â”‚Â Â          â”œâ”€â”€ Listeners
â”‚Â Â          â”‚Â Â  â””â”€â”€ PostEventListener.php
â”‚Â Â          â”œâ”€â”€ Models
â”‚Â Â          â”‚Â Â  â”œâ”€â”€ Post.php
â”‚Â Â          â”‚Â Â  â””â”€â”€ Traits
â”‚Â Â          â”‚Â Â      â”œâ”€â”€ Attribute
â”‚Â Â          â”‚Â Â      â”‚Â Â  â””â”€â”€ PostAttribute.php
â”‚Â Â          â”‚Â Â      â”œâ”€â”€ Method
â”‚Â Â          â”‚Â Â      â”‚Â Â  â””â”€â”€ PostMethod.php
â”‚Â Â          â”‚Â Â      â”œâ”€â”€ Relationship
â”‚Â Â          â”‚Â Â      â”‚Â Â  â””â”€â”€ PostRelationship.php
â”‚Â Â          â”‚Â Â      â””â”€â”€ Scope
â”‚Â Â          â”‚Â Â          â””â”€â”€ PostScope.php
â”‚Â Â          â”œâ”€â”€ Policies
â”‚Â Â          â”‚Â Â  â””â”€â”€ Post
â”‚Â Â          â”‚Â Â      â””â”€â”€ PostApiPolicy.php
â”‚Â Â          â”œâ”€â”€ Repositories
â”‚Â Â          â”‚Â Â  â””â”€â”€ Api
â”‚Â Â          â”‚Â Â      â”œâ”€â”€ PostApiRepository.php
â”‚Â Â          â”‚Â Â      â””â”€â”€ PostApiRepositoryInterface.php
â”‚Â Â          â””â”€â”€ Services
â”‚Â Â              â””â”€â”€ Api
â”‚Â Â                  â”œâ”€â”€ PostApiService.php
â”‚Â Â                  â””â”€â”€ PostApiServiceInterface.php
â”œâ”€â”€ Interfaces
â”‚Â Â  â””â”€â”€ BaseInterface.php
â”œâ”€â”€ Repositories
â”‚Â Â  â”œâ”€â”€ BaseRepository.php
â”‚Â Â  â”œâ”€â”€ BaseRepositoryInterface.php
â”‚Â Â  â”œâ”€â”€ Interfaces
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ PermissionRepositoryInterface.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ PostRepositoryInterface.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ RoleRepositoryInterface.php
â”‚Â Â  â”‚Â Â  â””â”€â”€ UserRepositoryInterface.php
â”‚Â Â  â”œâ”€â”€ PermissionRepository.php
â”‚Â Â  â”œâ”€â”€ PostRepository.php
â”‚Â Â  â”œâ”€â”€ RoleRepository.php
â”‚Â Â  â””â”€â”€ UserRepository.php
â””â”€â”€ Services
    â”œâ”€â”€ BaseApiService.php
    â”œâ”€â”€ BaseApiServiceInterface.php
    â”œâ”€â”€ BaseService.php
    â””â”€â”€ BaseServiceInterface.php
```

---

## ğŸš€ Artisan Commands

#### Directory Separator
- On **Windows**, the directory separator is `\`.
- On **macOS** and other Unix-based systems (Linux, etc.), the directory separator is `/`.

To ensure compatibility, always use the appropriate separator for your operating system.

#### ğŸ”§ Service Generator
```bash
php artisan make:service App/Domains/V1/Analytics/Services/ChannelBackendService
```

### ğŸ§± Model Generator

With optional generators:
```bash
php artisan make:model Channel --path=App/Domains/V1/Analytics/Models --trait --service --repository --requests --policy --force
```

Examples:
```bash
php artisan make:model App/Domains/V1/Test/Models/Dummy --trait --service --repository
php artisan make:model App/Domains/V1/Test/Models/Dummy --all
php artisan make:model App/Domains/V1/Test_a/Models/Dummy --service=DemoService --repository=DemoRepository
```

### ğŸ§¬ Trait Generator
```bash
php artisan make:trait App/Domains/V1/Test_a/Models/Traits/Dummy_testApiTrait
```

### ğŸ“¦ Module Generator
```bash
php artisan make:module App/Domains/V1/Subscription
```

### ğŸ§  Interface Generator
```bash
php artisan make:interface App/Domains/V1/Test_a/Models/Traits/Dummy_testApi
```

### ğŸ“‚ View Generator
```bash
php artisan make:view backend/plan/show
```

### ğŸ® Controller Generator

```bash
php artisan make:controller App/Domains/V1/Test/Http/Controllers/Api/DummyApiController --requests --repository --service --policy
```

With model:
```bash
php artisan make:controller App/Domains/V1/Test/Http/Controllers/Api/DummyApiController --model=App/Domains/V1/Test/Models/Dummy --api --requests --repository --service --policy
```

---

## ğŸ§© Flags Reference

| Flag            | Description                                               |
|-----------------|-----------------------------------------------------------|
| `--trait`       | Generate trait structure for Attribute, Scope, etc.       |
| `--service`     | Create a Service class for the model                      |
| `--repository`  | Create a Repository class for the model                   |
| `--requests`    | Generate request classes (Store, Update, etc.)            |
| `--policy`      | Generate a Policy file                                    |
| `--api`         | Generate a REST-style API controller                      |
| `--resource`    | Include resource methods in controller                    |
| `--plain`       | Generate plain class without extra logic                  |
| `--all`         | Generate everything (trait, service, repository, etc.)    |
| `--force`       | Overwrite existing files                                  |
| `--model`       | Specify model class for controller                        |
| `--path`        | Override the default path for file generation             |

---

## ğŸ“Œ Notes

- All generation paths/namespaces are configurable in `config/simple-module.php`
- Designed to support **modular** and **scalable** Laravel architecture
- Compatible with Laravel's **service-repository** and **policy-driven** design


## ğŸ§ª Testing
```
rm -rf vendor composer.lock && composer install && composer exec -- testbench test
```

## License

The MIT License (MIT). Please see [License File](LICENSE.md) for more information.
